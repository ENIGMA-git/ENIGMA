write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep=''))
}
}
SitePostfix<-"sean"
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
iter=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep=''))
}
}
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
iter=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep=''))
}
}
ID='SEANMDD'
CURRENT_ROI='"ACR","ACR_L","ACR_R","ALIC","ALIC_L","ALIC_R","AverageFA","BCC","CC","CGC","CGC_L","CGC_R","CGH","CGH_L","CGH_R","CR","CR_L","CR_R","CST","CST_L","CST_R","EC","EC_L","EC_R","FX","FX_ST_L","FX_ST_R","FXST","GCC","IC","IC_L","IC_R","IFO","IFO_L","IFO_R","PCR","PCR_L","PCR_R","PLIC","PLIC_L","PLIC_R","PTR","PTR_L","PTR_R","RLIC","RLIC_L","RLIC_R","SCC","SCR","SCR_L","SCR_R","SFO","SFO_L","SFO_R","SLF","SLF_L","SLF_R","SS","SS_L","SS_R","UNC","UNC_L","UNC_R"'
CURRENT_ROI2=("10","11","12","13","17","18","26","49","50","51","52","53","54","58")
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
SitePostfix<-"sean"
Config_Path="https://docs.google.com/spreadsheets/d/142eQItt4C_EJQff56-cpwlUPK7QmPICOgSHfnhGWx-w"
config_csv<-read_web_csv(Config_Path)
config_currentRun<-config_csv[grep(ID, config_csv$ID, ignore.case=T),]
if(nrow(config_currentRun)>1) {
cat (paste("Error: number of rows with ID ",ID," is more than 1. Row must be unique.",sep=''))
stop()
}
AnalysisList_Path<-config_currentRun$AnalysisList_Path
DemographicsList_Path<-config_currentRun$DemographicsList_Path
dsAnalysisConf<-read_web_csv(AnalysisList_Path)
#read demographic configuration file
dsDemographicsConf<-read_web_csv(DemographicsList_Path)
cat(paste("Analysis list path: ",AnalysisList_Path,sep=''))
TYPE<-config_currentRun$Type
TRAIT_LIST<-config_currentRun$Trait
TRAIT_LIST<-gsub("[[:space:]]", "", TRAIT_LIST)
TRAIT_LIST<-gsub(";","\",\"",TRAIT_LIST)
SHAPE_METRICS<-eval(parse(text=paste('c("',TRAIT_LIST,'")',sep='')))
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
iter=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep=''))
}
}
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
CURRENT_ROI2=("10","11","12","13","17","18","26","49","50","51","52","53","54","58")
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
CURRENT_ROI2='"10","11","12","13","17","18","26","49","50","51","52","53","54","58"'
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
ID='SEANMDD'
CURRENT_ROI='"ACR","ACR_L","ACR_R","ALIC","ALIC_L","ALIC_R","AverageFA","BCC","CC","CGC","CGC_L","CGC_R","CGH","CGH_L","CGH_R","CR","CR_L","CR_R","CST","CST_L","CST_R","EC","EC_L","EC_R","FX","FX_ST_L","FX_ST_R","FXST","GCC","IC","IC_L","IC_R","IFO","IFO_L","IFO_R","PCR","PCR_L","PCR_R","PLIC","PLIC_L","PLIC_R","PTR","PTR_L","PTR_R","RLIC","RLIC_L","RLIC_R","SCC","SCR","SCR_L","SCR_R","SFO","SFO_L","SFO_R","SLF","SLF_L","SLF_R","SS","SS_L","SS_R","UNC","UNC_L","UNC_R"'
CURRENT_ROI2='"10","11","12","13","17","18","26","49","50","51","52","53","54","58"'
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
SitePostfix<-"sean"
Config_Path="https://docs.google.com/spreadsheets/d/142eQItt4C_EJQff56-cpwlUPK7QmPICOgSHfnhGWx-w"
config_csv<-read_web_csv(Config_Path)
config_currentRun<-config_csv[grep(ID, config_csv$ID, ignore.case=T),]
if(nrow(config_currentRun)>1) {
cat (paste("Error: number of rows with ID ",ID," is more than 1. Row must be unique.",sep=''))
stop()
}
AnalysisList_Path<-config_currentRun$AnalysisList_Path
DemographicsList_Path<-config_currentRun$DemographicsList_Path
dsAnalysisConf<-read_web_csv(AnalysisList_Path)
#read demographic configuration file
dsDemographicsConf<-read_web_csv(DemographicsList_Path)
cat(paste("Analysis list path: ",AnalysisList_Path,sep=''))
TYPE<-config_currentRun$Type
TRAIT_LIST<-config_currentRun$Trait
TRAIT_LIST<-gsub("[[:space:]]", "", TRAIT_LIST)
TRAIT_LIST<-gsub(";","\",\"",TRAIT_LIST)
SHAPE_METRICS<-eval(parse(text=paste('c("',TRAIT_LIST,'")',sep='')))
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
iter=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep=''))
}
}
ID='SEANMDD'
CURRENT_ROI='"ACR","ACR_L","ACR_R","ALIC","ALIC_L","ALIC_R","AverageFA","BCC","CC","CGC","CGC_L","CGC_R","CGH","CGH_L","CGH_R","CR","CR_L","CR_R","CST","CST_L","CST_R","EC","EC_L","EC_R","FX","FX_ST_L","FX_ST_R","FXST","GCC","IC","IC_L","IC_R","IFO","IFO_L","IFO_R","PCR","PCR_L","PCR_R","PLIC","PLIC_L","PLIC_R","PTR","PTR_L","PTR_R","RLIC","RLIC_L","RLIC_R","SCC","SCR","SCR_L","SCR_R","SFO","SFO_L","SFO_R","SLF","SLF_L","SLF_R","SS","SS_L","SS_R","UNC","UNC_L","UNC_R"'
CURRENT_ROI2='"10","11","12","13","17","18","26","49","50","51","52","53","54","58"'
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
SitePostfix<-"sean"
Config_Path="https://docs.google.com/spreadsheets/d/142eQItt4C_EJQff56-cpwlUPK7QmPICOgSHfnhGWx-w"
config_csv<-read_web_csv(Config_Path)
config_currentRun<-config_csv[grep(ID, config_csv$ID, ignore.case=T),]
if(nrow(config_currentRun)>1) {
cat (paste("Error: number of rows with ID ",ID," is more than 1. Row must be unique.",sep=''))
stop()
}
AnalysisList_Path<-config_currentRun$AnalysisList_Path
DemographicsList_Path<-config_currentRun$DemographicsList_Path
dsAnalysisConf<-read_web_csv(AnalysisList_Path)
#read demographic configuration file
dsDemographicsConf<-read_web_csv(DemographicsList_Path)
cat(paste("Analysis list path: ",AnalysisList_Path,sep=''))
TYPE<-config_currentRun$Type
TRAIT_LIST<-config_currentRun$Trait
TRAIT_LIST<-gsub("[[:space:]]", "", TRAIT_LIST)
TRAIT_LIST<-gsub(";","\",\"",TRAIT_LIST)
SHAPE_METRICS<-eval(parse(text=paste('c("',TRAIT_LIST,'")',sep='')))
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,sep=''))
}
}
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
}
}
for(trait in SHAPE_METRICS){
for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
}
}
trait="LogJacs"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
}
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/MDD_test/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
i=i+1
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
data_res<-do.call(rbind,data_csv)
#----Postprocessing script for mass_uv_regr package. Don't change
#-Dmitry Isaev
#-Boris Gutman
#-Neda Jahanshad
# Beta version for testing on sites.
#-Imaging Genetics Center, Keck School of Medicine, University of Southern California
#-ENIGMA Project, 2015
# enigma@ini.usc.edu
# http://enigma.ini.usc.edu
#-----------------------------------------------
library(ppcor)
library(matrixStats)
#--0.
require(RCurl)
read_web_csv<-function(url_address){
gdoc3=paste(url_address,'/export?format=csv&id=KEY',sep='')
myCsv <- getURL(gdoc3,.opts=list(ssl.verifypeer=FALSE))
csv_res<-read.csv(textConnection(myCsv),header = TRUE,stringsAsFactors = FALSE)
return (csv_res)
}
#--0.
#--1. READING THE COMMAND LINE---
a1="
cmdargs = commandArgs(trailingOnly=T)
ID=cmdargs[1]
#RUN_ID=cmdargs[1]
SITE=cmdargs[2]
SitePostfix<-SITE
logDir=cmdargs[4]
#LOG_FILE<-paste(logDir, '/',RUN_ID,'_',SITE,'.log',sep='')
resDir=cmdargs[5]
Results_CSV_Path<-paste(resDir,'/',RUN_ID,'_',sep='')
ROI_LIST=cmdargs[7]
ROI<-eval(parse(text=paste('c(',CURRENT_ROI,')',sep='')))
Config_Path=cmdargs[6]   #docs.google
"
ID='SZDTI'
CURRENT_ROI='"ACR","ACR_L","ACR_R","ALIC","ALIC_L","ALIC_R","AverageFA","BCC","CC","CGC","CGC_L","CGC_R","CGH","CGH_L","CGH_R","CR","CR_L","CR_R","CST","CST_L","CST_R","EC","EC_L","EC_R","FX","FX_ST_L","FX_ST_R","FXST","GCC","IC","IC_L","IC_R","IFO","IFO_L","IFO_R","PCR","PCR_L","PCR_R","PLIC","PLIC_L","PLIC_R","PTR","PTR_L","PTR_R","RLIC","RLIC_L","RLIC_R","SCC","SCR","SCR_L","SCR_R","SFO","SFO_L","SFO_R","SLF","SLF_L","SLF_R","SS","SS_L","SS_R","UNC","UNC_L","UNC_R"'
CURRENT_ROI2='"10","11","12","13","17","18","26","49","50","51","52","53","54","58"'
ROI<-eval(parse(text=paste('c(',CURRENT_ROI2,')',sep='')))
SitePostfix<-"dublin"
Config_Path="https://docs.google.com/spreadsheets/d/1AxtW4xN8ETZUHvztqqkF0jD68Mm_5SNPWV2Y6HPFrh8"
config_csv<-read_web_csv(Config_Path)
config_currentRun<-config_csv[grep(ID, config_csv$ID, ignore.case=T),]
if(nrow(config_currentRun)>1) {
cat (paste("Error: number of rows with ID ",ID," is more than 1. Row must be unique.",sep=''))
stop()
}
AnalysisList_Path<-config_currentRun$AnalysisList_Path
DemographicsList_Path<-config_currentRun$DemographicsList_Path
dsAnalysisConf<-read_web_csv(AnalysisList_Path)
#read demographic configuration file
dsDemographicsConf<-read_web_csv(DemographicsList_Path)
cat(paste("Analysis list path: ",AnalysisList_Path,sep=''))
TYPE<-config_currentRun$Type
TRAIT_LIST<-config_currentRun$Trait
TRAIT_LIST<-gsub("[[:space:]]", "", TRAIT_LIST)
TRAIT_LIST<-gsub(";","\",\"",TRAIT_LIST)
SHAPE_METRICS<-eval(parse(text=paste('c("',TRAIT_LIST,'")',sep='')))
trait="FA"
cur_rowAnalysis=1
View(dsAnalysisConf)
trait="FA"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
i=i+1
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
#  }
#}
#----Postprocessing script for mass_uv_regr package. Don't change
#-Dmitry Isaev
#-Boris Gutman
#-Neda Jahanshad
# Beta version for testing on sites.
#-Imaging Genetics Center, Keck School of Medicine, University of Southern California
#-ENIGMA Project, 2015
# enigma@ini.usc.edu
# http://enigma.ini.usc.edu
#-----------------------------------------------
library(ppcor)
library(matrixStats)
#--0.
require(RCurl)
read_web_csv<-function(url_address){
gdoc3=paste(url_address,'/export?format=csv&id=KEY',sep='')
myCsv <- getURL(gdoc3,.opts=list(ssl.verifypeer=FALSE))
csv_res<-read.csv(textConnection(myCsv),header = TRUE,stringsAsFactors = FALSE)
return (csv_res)
}
#--0.
#--1. READING THE COMMAND LINE---
a1="
cmdargs = commandArgs(trailingOnly=T)
ID=cmdargs[1]
#RUN_ID=cmdargs[1]
SITE=cmdargs[2]
SitePostfix<-SITE
logDir=cmdargs[4]
#LOG_FILE<-paste(logDir, '/',RUN_ID,'_',SITE,'.log',sep='')
resDir=cmdargs[5]
Results_CSV_Path<-paste(resDir,'/',RUN_ID,'_',sep='')
ROI_LIST=cmdargs[7]
ROI<-eval(parse(text=paste('c(',CURRENT_ROI,')',sep='')))
Config_Path=cmdargs[6]   #docs.google
"
ID='SZDTI'
CURRENT_ROI='"ACR","ACR_L","ACR_R","ALIC","ALIC_L","ALIC_R","AverageFA","BCC","CC","CGC","CGC_L","CGC_R","CGH","CGH_L","CGH_R","CR","CR_L","CR_R","CST","CST_L","CST_R","EC","EC_L","EC_R","FX","FX_ST_L","FX_ST_R","FXST","GCC","IC","IC_L","IC_R","IFO","IFO_L","IFO_R","PCR","PCR_L","PCR_R","PLIC","PLIC_L","PLIC_R","PTR","PTR_L","PTR_R","RLIC","RLIC_L","RLIC_R","SCC","SCR","SCR_L","SCR_R","SFO","SFO_L","SFO_R","SLF","SLF_L","SLF_R","SS","SS_L","SS_R","UNC","UNC_L","UNC_R"'
CURRENT_ROI2='"10","11","12","13","17","18","26","49","50","51","52","53","54","58"'
ROI<-eval(parse(text=paste('c(',CURRENT_ROI,')',sep='')))
SitePostfix<-"dublin"
Config_Path="https://docs.google.com/spreadsheets/d/1AxtW4xN8ETZUHvztqqkF0jD68Mm_5SNPWV2Y6HPFrh8"
config_csv<-read_web_csv(Config_Path)
config_currentRun<-config_csv[grep(ID, config_csv$ID, ignore.case=T),]
if(nrow(config_currentRun)>1) {
cat (paste("Error: number of rows with ID ",ID," is more than 1. Row must be unique.",sep=''))
stop()
}
AnalysisList_Path<-config_currentRun$AnalysisList_Path
DemographicsList_Path<-config_currentRun$DemographicsList_Path
dsAnalysisConf<-read_web_csv(AnalysisList_Path)
#read demographic configuration file
dsDemographicsConf<-read_web_csv(DemographicsList_Path)
cat(paste("Analysis list path: ",AnalysisList_Path,sep=''))
TYPE<-config_currentRun$Type
TRAIT_LIST<-config_currentRun$Trait
TRAIT_LIST<-gsub("[[:space:]]", "", TRAIT_LIST)
TRAIT_LIST<-gsub(";","\",\"",TRAIT_LIST)
SHAPE_METRICS<-eval(parse(text=paste('c("',TRAIT_LIST,'")',sep='')))
trait="FA"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
i=i+1
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
#  }
#}
#----Postprocessing script for mass_uv_regr package. Don't change
#-Dmitry Isaev
#-Boris Gutman
#-Neda Jahanshad
# Beta version for testing on sites.
#-Imaging Genetics Center, Keck School of Medicine, University of Southern California
#-ENIGMA Project, 2015
# enigma@ini.usc.edu
# http://enigma.ini.usc.edu
#-----------------------------------------------
library(ppcor)
library(matrixStats)
#--0.
require(RCurl)
read_web_csv<-function(url_address){
gdoc3=paste(url_address,'/export?format=csv&id=KEY',sep='')
myCsv <- getURL(gdoc3,.opts=list(ssl.verifypeer=FALSE))
csv_res<-read.csv(textConnection(myCsv),header = TRUE,stringsAsFactors = FALSE)
return (csv_res)
}
#--0.
#--1. READING THE COMMAND LINE---
a1="
cmdargs = commandArgs(trailingOnly=T)
ID=cmdargs[1]
#RUN_ID=cmdargs[1]
SITE=cmdargs[2]
SitePostfix<-SITE
logDir=cmdargs[4]
#LOG_FILE<-paste(logDir, '/',RUN_ID,'_',SITE,'.log',sep='')
resDir=cmdargs[5]
Results_CSV_Path<-paste(resDir,'/',RUN_ID,'_',sep='')
ROI_LIST=cmdargs[7]
ROI<-eval(parse(text=paste('c(',CURRENT_ROI,')',sep='')))
Config_Path=cmdargs[6]   #docs.google
"
ID='SZDTI'
CURRENT_ROI='"ACR","ACR_L","ACR_R","ALIC","ALIC_L","ALIC_R","AverageFA","BCC"'#,"CC","CGC","CGC_L","CGC_R","CGH","CGH_L","CGH_R","CR","CR_L","CR_R","CST","CST_L","CST_R","EC","EC_L","EC_R","FX","FX_ST_L","FX_ST_R","FXST","GCC","IC","IC_L","IC_R","IFO","IFO_L","IFO_R","PCR","PCR_L","PCR_R","PLIC","PLIC_L","PLIC_R","PTR","PTR_L","PTR_R","RLIC","RLIC_L","RLIC_R","SCC","SCR","SCR_L","SCR_R","SFO","SFO_L","SFO_R","SLF","SLF_L","SLF_R","SS","SS_L","SS_R","UNC","UNC_L","UNC_R"'
CURRENT_ROI2='"10","11","12","13","17","18","26","49","50","51","52","53","54","58"'
ROI<-eval(parse(text=paste('c(',CURRENT_ROI,')',sep='')))
SitePostfix<-"dublin"
Config_Path="https://docs.google.com/spreadsheets/d/1AxtW4xN8ETZUHvztqqkF0jD68Mm_5SNPWV2Y6HPFrh8"
config_csv<-read_web_csv(Config_Path)
config_currentRun<-config_csv[grep(ID, config_csv$ID, ignore.case=T),]
if(nrow(config_currentRun)>1) {
cat (paste("Error: number of rows with ID ",ID," is more than 1. Row must be unique.",sep=''))
stop()
}
AnalysisList_Path<-config_currentRun$AnalysisList_Path
DemographicsList_Path<-config_currentRun$DemographicsList_Path
dsAnalysisConf<-read_web_csv(AnalysisList_Path)
#read demographic configuration file
dsDemographicsConf<-read_web_csv(DemographicsList_Path)
cat(paste("Analysis list path: ",AnalysisList_Path,sep=''))
TYPE<-config_currentRun$Type
TRAIT_LIST<-config_currentRun$Trait
TRAIT_LIST<-gsub("[[:space:]]", "", TRAIT_LIST)
TRAIT_LIST<-gsub(";","\",\"",TRAIT_LIST)
SHAPE_METRICS<-eval(parse(text=paste('c("',TRAIT_LIST,'")',sep='')))
trait="FA"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
i=i+1
}
data_res<-do.call(rbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
#  }
#}
trait="FA"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
data_csv[[i]]=cur_csv
i=i+1
}
data_res<-do.call(cbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
#  }
#}
trait="FA"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
data_csv<-as.list(rep(NA,times=1))
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
if(i==1) {
data_csv<-cur_csv
}
else{
data_csv<-matr<-rbind(data_csv,cur_csv,deparse.level = 0)
}
i=i+1
}
data_res<-do.call(cbind,data_csv)
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_res,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
#  }
#}
View(data_csv)
View(cur_csv)
trait="FA"
cur_rowAnalysis=1
#for(trait in SHAPE_METRICS){
#  for (cur_rowAnalysis in 1:nrow(dsAnalysisConf)){
i=1
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
for (cur_roi in ROI) {
f_name=paste(ID,'_',cur_roi,'_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep='')
cur_csv<-read.csv(f_name, header = TRUE)
if(i==1) {
data_csv<-cur_csv
}
else{
data_csv<-rbind(data_csv,cur_csv,deparse.level = 0)
}
i=i+1
}
setwd('/Users/disaev/Desktop/test1/')
write.csv(data_csv,file=paste(ID,'_all_',trait,'_',dsAnalysisConf$ID[cur_rowAnalysis],'_',SitePostfix,'.csv',sep=''))
#  }
#}
View(data_csv)
View(cur_csv)
cur_csv<-read.csv(f_name, header = TRUE,sep=',',dec='.')
setwd('/Volumes/four_d/disaev/mass_uv_regr/res/')
cur_csv<-read.csv(f_name, header = TRUE,sep=',',dec='.')
View(cur_csv)
